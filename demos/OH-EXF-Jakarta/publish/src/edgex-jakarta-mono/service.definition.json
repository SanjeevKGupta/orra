{
    "org": "${HZN_ORG_ID}",
    "label": "${SERVICE_NAME}-${ARCH}",
    "url": "${SERVICE_NAME}",
    "version": "${SERVICE_VERSION}",
    "arch": "${ARCH}",
    "public": false,
    "sharable": "singleton",
    "requiredServices": [
    ],
    "userInput": [
        { "name": "CLIENTS_CORE_COMMAND_HOST", "type": "string", "defaultValue": "${EDGE_OWNER}.${EDGE_DEPLOY}.core-command" },
        { "name": "CLIENTS_CORE_DATA_HOST", "type": "string", "defaultValue": "${EDGE_OWNER}.${EDGE_DEPLOY}.core-data" },
        { "name": "CLIENTS_CORE_METADATA_HOST", "type": "string", "defaultValue": "${EDGE_OWNER}.${EDGE_DEPLOY}.core-metadata" },
        { "name": "CLIENTS_METADATA_HOST", "type": "string", "defaultValue": "${EDGE_OWNER}.${EDGE_DEPLOY}.core-metadata" },
        { "name": "CLIENTS_NOTIFICATION_HOST", "type": "string", "defaultValue": "${EDGE_OWNER}.${EDGE_DEPLOY}.support-notifications" },
        { "name": "CLIENTS_SCHEDULER_HOST", "type": "string", "defaultValue": "${EDGE_OWNER}.${EDGE_DEPLOY}.support-scheduler" },
        { "name": "CLIENTS_SUPPORT_NOTIFICATIONS_HOST", "type": "string", "defaultValue": "${EDGE_OWNER}.${EDGE_DEPLOY}.support-notifications" },
        { "name": "CLIENTS_SUPPORT_SCHEDULER_HOST", "type": "string", "defaultValue": "${EDGE_OWNER}.${EDGE_DEPLOY}.support-scheduler" },
        { "name": "DATABASES_PRIMARY_HOST", "type": "string",  "defaultValue": "${EDGE_OWNER}.${EDGE_DEPLOY}.redis" },
        { "name": "DATABASES_PRIMARY_HOST", "type": "string", "defaultValue": "${EDGE_OWNER}.${EDGE_DEPLOY}.redis" },
        { "name": "DEVICE_DEVICESDIR", "type": "string",  "defaultValue": "/camera-device-mqtt/devices" },
        { "name": "DEVICE_PROFILESDIR", "type": "string",  "defaultValue": "/camera-device-mqtt/profiles" },
        { "name": "DRIVER_BASENOTIFICATIONURL", "type": "string", "defaultValue": "http://localhost:59985" },
        { "name": "DRIVER_CREDENTIALSRETRYTIME", "type": "int", "defaultValue": "120" },
        { "name": "DRIVER_CREDENTIALSRETRYWAIT", "type": "int", "defaultValue": "1" },
        { "name": "DRIVER_DEFAULTAUTHMODE", "type": "string", "defaultValue": "usernametoken" },
        { "name": "DRIVER_DEFAULTSECRETPATH", "type": "string", "defaultValue": "credentials001" },
        { "name": "DRIVER_DISCOVERYETHERNETINTERFACE", "type": "string", "defaultValue": "eno1" },
        { "name": "DRIVER_REQUESTTIMEOUT", "type": "int", "defaultValue": "5" },
        { "name": "EDGEX_PROFILE", "type": "string", "defaultValue": "mqtt-export" },
        { "name": "EDGEX_SECURITY_SECRET_STORE", "type": "boolean", "defaultValue": "false" },
        { "name": "MESSAGEQUEUE_HOST", "type": "string", "defaultValue": "${EDGE_OWNER}.${EDGE_DEPLOY}.redis" },
        { "name": "MQTTBROKERINFO_HOST", "type": "string", "defaultValue": "${EDGE_OWNER}.${EDGE_DEPLOY}.mqtt-broker" },
        { "name": "MQTTBROKERINFO_INCOMINGTOPIC", "type": "string",  "defaultValue": "incoming/data/#" },
        { "name": "MQTTBROKERINFO_RESPONSETOPIC", "type": "string",  "defaultValue": "command/response/#" },
        { "name": "MQTTBROKERINFO_USETOPICLEVELS", "type": "boolean",  "defaultValue": "true" },
        { "name": "NOTIFICATIONS_SENDER", "type": "string", "defaultValue": "edgex-core-metadata" },
        { "name": "REGISTRY_HOST", "type": "string", "defaultValue": "${EDGE_OWNER}.${EDGE_DEPLOY}.consul" },
        { "name": "SERVICE_HOST", "type": "string", "defaultValue": "${SERVICE_NAME}" },
        { "name": "SERVICE_SERVERBINDADDR", "type": "string", "defaultValue": "0.0.0.0" },
        { "name": "TRIGGER_EDGEXMESSAGEBUS_PUBLISHHOST_HOST", "type": "string", "defaultValue": "${EDGE_OWNER}.${EDGE_DEPLOY}.redis" },
        { "name": "TRIGGER_EDGEXMESSAGEBUS_SUBSCRIBEHOST_HOST", "type": "string", "defaultValue": "${EDGE_OWNER}.${EDGE_DEPLOY}.redis" },
        { "name": "WRITABLE_PIPELINE_FUNCTIONS_MQTTEXPORT_PARAMETERS_BROKERADDRESS", "type": "string", "defaultValue": "tcp://${EDGE_OWNER}.${EDGE_DEPLOY}.mqtt-broker:1883" },
        { "name": "WRITABLE_PIPELINE_FUNCTIONS_MQTTEXPORT_PARAMETERS_TOPIC", "type": "string", "defaultValue": "edgex-events" }
    ],
    "deployment": {
        "services": {
            "${EDGE_OWNER}.${EDGE_DEPLOY}.asc-mqtt": {
                "image": "${DOCKER_BASE}/app-service-configurable:${VERSION_asc_mqtt}",
                "command": ["-cp=consul.http://${EDGE_OWNER}.${EDGE_DEPLOY}.consul:8500", "--registry", "--confdir=/res"],
                "ports": [
                    {
                        "HostIP": "127.0.0.1",
                        "HostPort": "59703:59703/tcp"
                    }
                ]
            },
            "${EDGE_OWNER}.${EDGE_DEPLOY}.consul": {
                "image": "consul:${VERSION_consul}",
//                "command": ["agent", "-ui", "-bootstrap", "-server", "-client=0.0.0.0", "-bind=127.0.0.1"],
                "entrypoint": ["/custom-entrypoint.sh"],
                "command": [""],
                "binds": [
                    "${APP_BIND_HORIZON_DIR}/consul-config:/consul/config:rw",
                    "${APP_BIND_HORIZON_DIR}/consul-data:/consul/data:rw",
                    "${APP_BIND_HORIZON_DIR}/consul/bin/custom-entrypoint.sh:/custom-entrypoint.sh:ro"
                ],
                "ports": [
                    {
                        "HostIP": "0.0.0.0",
                        "HostPort": "8500:8500/tcp"
                    }
                ]
            },
            "${EDGE_OWNER}.${EDGE_DEPLOY}.core-command": {
                "image": "${DOCKER_BASE}/core-command:${VERSION_core_command}",
                "command": ["-cp=consul.http://${EDGE_OWNER}.${EDGE_DEPLOY}.consul:8500", "--registry", "--confdir=/res"],
                "ports": [
                    {
                        "HostIP": "127.0.0.1",
                        "HostPort": "59882:59882/tcp"
                    }
                ]
            },
            "${EDGE_OWNER}.${EDGE_DEPLOY}.core-metadata": {
                "image": "${DOCKER_BASE}/core-metadata:${VERSION_core_metadata}",
                "command": ["-cp=consul.http://${EDGE_OWNER}.${EDGE_DEPLOY}.consul:8500", "--registry", "--confdir=/res"],
                "ports": [
                    {
                        "HostIP": "0.0.0.0",
                        "HostPort": "59881:59881/tcp"
                    }
                ]
            },
            "${EDGE_OWNER}.${EDGE_DEPLOY}.deploy-data": {
                "image": "localhost:5000/deploy-data:${VERSION_deploy_data}",
                "binds": [
                    "${APP_BIND_HORIZON_DIR}:/out:rw"
                ]
            },
            "${EDGE_OWNER}.${EDGE_DEPLOY}.device-mqtt": {
                "image": "${DOCKER_BASE}/device-mqtt:${VERSION_device_mqtt}",
                "command": ["-cp=consul.http://${EDGE_OWNER}.${EDGE_DEPLOY}.consul:8500", "--registry"],
                "binds": [
                    "${APP_BIND_HORIZON_DIR}/device-mqtt/camera-device-mqtt:/camera-device-mqtt:ro"
                ],
                "ports": [{
                    "HostIP": "127.0.0.1",
                    "HostPort": "59982:59982/tcp"
                }]
            },
            "${EDGE_OWNER}.${EDGE_DEPLOY}.device-onvif-camera": {
                "image": "localhost:5000/device-onvif-camera:${VERSION_device_onvif_camera}-dev",
                "command": ["-cp=consul.http://${EDGE_OWNER}.${EDGE_DEPLOY}.consul:8500", "--registry", "--confdir=/res"],
                "ports": [{
                    "HostIP": "0.0.0.0",
                    "HostPort": "59985:59985/tcp"
                }]
            },
            "${EDGE_OWNER}.${EDGE_DEPLOY}.edgex-ui": {
                "image": "${DOCKER_BASE}/edgex-ui:${VERSION_edgex_ui}",
                "binds": [
                    "${APP_BIND_HORIZON_DIR}/edgex-ui/res:/go/src/github.com/edgexfoundry/edgex-ui-go/cmd/edgex-ui-server/res:ro"
                ],
                "ports": [{
                    "HostIP": "0.0.0.0",
                    "HostPort": "4000:4000/tcp"
                }]
            },
            "${EDGE_OWNER}.${EDGE_DEPLOY}.mqtt-broker": {
                "image": "eclipse-mosquitto:${VERSION_mqtt_broker}",
                "command": ["/usr/sbin/mosquitto", "-c", "/mosquitto-no-auth.conf"],
                "ports": [{
                    "HostIP": "0.0.0.0",
                    "HostPort": "1883:1883/tcp"
                }]
            },
            "${EDGE_OWNER}.${EDGE_DEPLOY}.redis": {
                "image": "redis:${VERSION_redis}",
                "binds": [
                    "${APP_BIND_HORIZON_DIR}/db-data:/data:z"
                ],
                "ports": [{
                    "HostIP": "127.0.0.1",
                    "HostPort": "6379:6379/tcp"
                }]
            }
        }
    }
}
